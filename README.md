# Wings-of-Combination
组合体之翼

## 1 总体设计

单位之间能够组合以提供属性和机制的增强，建筑之间组合（临近）可以提供属性和机制的增强。

确定设计：

* 融合模式组合（全序关系），主要用于防御建筑和其他建筑组合，没有主从概念，得到结果为相同建筑
* 主从模式组合（偏序关系），用于多数单位和建筑的组合，通过组合舱位进行限制取舍，每个单位/建筑拥有舱位和舱位占用不同
* 单位/建筑组合之后类似于火车（亡命快车），多节共享生命值但独立单位
* 主要单位（车头）决定基础攻击/技能形态，从单位提供攻击/技能形态的属性/机制调整
* 任意单位（步兵、车辆、飞行器）之间能够组合，提供攻击/技能的属性/机制修改
* 任意建筑（生产建筑、科技建筑、防御建筑）之间能够组合，提供生产、科技研发和防御增强等效果
* 建筑可以作为主要单位与单位组合（枪兵背要塞就太离谱了），类似进驻，实现不同建筑之间作用的修正
* 组合的单位标签相应会叠加（寿衣越披越厚），作为强度提升之外的平衡因素
* 所有建筑都能飞（包括气矿），飞起的建筑作为从属物添加与车头组合的技能按钮，建筑组合类似于挂件机制
* 已组合单位能够一键拆分（解散），得到该组合单位的所有基础单位
* 已组合建筑可以一键拆分，得到所有基础建筑（起飞状态）

存疑设计：

* 是否能够人体蜈蚣（无限制的叠），自己吃自己（莫比斯基金会赞助播出）
* ~~是否允许单位拆分（似乎实现起来很麻烦）~~

## 2 概要设计

单位与单位、建筑与建筑、单位与建筑之间组合联动。

### 2.1 标签系统

* 采集者：收集地图内资源，自动产生资源
* 生物：步兵单位基础标签，区分治疗目标
* 轻甲：影响基础护甲
* 重甲：影响基础护甲
* 施法者：能够自动使用主动技能的单位/建筑均为施法者
* 灵能：所有带蓝条单位都是灵能（包括医疗兵）
* 机械：scv、车辆、飞行器的基础标签，区分治疗目标
* 轻型：作为主单位时舱位+2
* 中型：作为主单位时舱位+4
* 重型：做为主单位时舱位+8，可以破坏立场，与轻型单位之间没有碰撞，对轻型单位有践踏伤害
* 生产建筑：通过生产行为或技能行为（空投矿骡），产生单位，车辆，飞行器或充能计数（如核弹）
* 科技建筑：包含科技升级的建筑，科技升级影响部分（指定标签的单位/建筑）或全局（攻防等级）
* 挂件建筑：通过左值和右值进行区分，左侧为主要建筑，右侧为从属
* 防御建筑：包含武器的建筑，可以作为施法者，与其他建筑组合时有独特行为

### 2.2 组合行为

* 原生单位均包含一个名为“组合”的技能，选定目标单位作为主单位，施法者作为从单位，当选定目标的组合舱位大于等于当前单位的所需舱位数，则允许施法，施法成功后生成一个新的单位
* 轻型单位无法作为主单位与重型单位组合
* 组合得到的单位拥有一个“拆分”的技能，使用技能后得到当前组成组合单位的所有基础单位
* 防御建筑与任何组合目标均以融合模式进行组合，得到相同结果
* 具有挂件建筑标签的建筑，在另一个建筑右侧邻接时，作为挂件建筑，向左侧建筑提供增益
* 所有主单位均有一个计数器（被动技能）显示舱位上限和当前组合舱位数

### 2.3 单位小队

* 单位之间的组合均组成小队（类似于枢纽格式塔），主单位为选中目标，从单位自动开火
* 不同从单位向主单位提供各类属性加成、武器修改、自动技能

* 根据主单位的不同，小队行为不同（例如小队不开火，但修改主单位武器或提供自动技能）

## 3 单位组合详细设计

基础舱位提供加上标签提供（轻型、中型、重型）之后为最终的舱位提供。

### 3.1 步兵对步兵

| 单位     | 主单位定位            | 从单位特性                                                   | 基础舱位提供 | 基础舱位占用 |
| -------- | --------------------- | ------------------------------------------------------------ | ------------ | ------------ |
| SCV      | 采集者，建造者        | 高额血量加成，去除单位标签（军械库）                         | 2            | 1            |
| 陆战队员 | 空对地输出，轻甲输出  | 少量血量加成，提供兴奋剂（军械库），提供固定减伤（军械库）   | 2            | 1            |
| 医疗兵   | 生物单位治疗          | 中等血量加成，即时固定回复，即时百分比回复（军械库），免疫技能伤害（军械库） | 2            | 1            |
| 劫掠者   | 肉盾，对地重甲加成    | 少量血量加成，普通攻击debuff，翻倍debuff（军械库），受伤缓冲（军械库） | 2            | 2            |
| 火蝠     | 肉盾，对地轻甲AOE输出 | 少量血量加成，普通攻击溅射，溅射翻倍（军械库），免疫溅射酸液伤害（军械库） | 2            | 2            |
| 收割者   | 机动性，对地轻甲加成  | 少量血量加成，悬崖跳跃（肉盾冲锋），轻甲加成（军械库），攻击布雷（军械库） | 2            | 1            |
| 幽灵     | 隐身，生物和护盾加成  | 少量血量加成，自动狙击高仇恨目标，永久隐身（军械库），机械单位瘫痪（军械库） | 4            | 2            |
| 幽魂     | 隐身，灵能和护盾加成  | 少量血量加成，自动范围眩晕高仇恨目标，永久隐身（军械库），高额暴击率（军械库） | 4            | 2            |

### 3.2 车辆对车辆



### 3.3 飞行器对飞行器



## 4 建筑组合详细设计（未来）

建筑组合分为融合和挂载两种模式，建筑融合则形成一个建筑（占位），建筑挂载需要区分左值和右值。

建筑作为挂件使用时，原本技能变为不可用。

建筑融合之后不可拆分，挂载可以通过建筑起飞来解除。

### 4.1 科技建筑

| 建筑     | 科技研发                     | 建筑技能                                         |
| -------- | ---------------------------- | ------------------------------------------------ |
| 工程站   | 步兵单位攻防升级             | 建筑维修机（充能技能）                           |
| 军械库   | 载具（车辆和飞行器）攻防升级 | 要塞防御者（充能机械蝗虫，对空对地，吃机械攻防） |
| 幽灵军校 | 研发灵能标签相关科技         | 附近单位回复能量                                 |
| 聚变星体 | 研发重型单位相关科技         | 撕裂辐射发生器（蝎子红雾，不致死）               |

### 4.2 生产建筑

| 建筑     | 单位生产              | 建筑技能                                        |
| -------- | --------------------- | ----------------------------------------------- |
| 兵营     | 步兵单位              |                                                 |
| 重工厂   | 车辆载具              |                                                 |
| 星港     | 飞行器                |                                                 |
| 幽灵军校 | 核弹充能              |                                                 |
| 指挥中心 | SCV、矿骡（高级单位） | 雷达扫描、限时矿骡                              |
| 行星要塞 | SCV、矿骡（高级单位） | 泰伦能射线枪（Excalibur）、护甲超载（Rho Aias） |

### 4.3 防御建筑

| 建筑       | 建筑定位                 | 建筑技能                                                     | 融合特性                 |
| ---------- | ------------------------ | ------------------------------------------------------------ | ------------------------ |
| 补给站     | 墩子，纯挡路             | 补给站下降（停止挡路），泰伦之盾（随时间充能，10层时阻挡飞行单位） | 提供巨量血量加成         |
| 地堡       | 进驻单位攻击，多功能墩子 | 默认组合舱位8                                                | 提供组合舱位8            |
| 导弹塔     | 空对地火力支点           | 暴风导弹                                                     | 建筑搭载对空武器         |
| 喷火塔     | 地对地                   | 焦油泼洒（布雷泽同款，爆燃效果）                             | 建筑增加火环技能（充能） |
| 行星要塞   | 均衡的对地溅射攻击       | 泰伦能射线枪（Excalibur）、护甲超载（Rho Aias）              | 飞不起来                 |
| 灵能干扰器 | 降低敌方攻速移速         | 单个单位眩晕，快速充能                                       | 被攻击施加减速           |
| 灵能控制器 | 永久控制敌方单位         | 向高威胁单位自动释放，永久控制，无CD纯耗能                   | 被攻击施加混乱           |

### 4.4 挂件建筑

| 建筑       | 作为生产建筑挂件                                      | 作为科技建筑挂件              | 作为防御建筑挂件                                             |
| ---------- | ----------------------------------------------------- | ----------------------------- | ------------------------------------------------------------ |
| 科技挂件   | 解锁高级单位建造                                      | 研发费用减半                  | 少量血量提升，技能充能上限+3                                 |
| 反应堆挂件 | 双流水线生产                                          | 双流水线研发                  | 少量血量提升，技能一次补充2充能次数                          |
| 高科反应堆 | 解锁高级单位，双流水线                                | 费用减半，双流水线            | 少量血量提升，技能充能上限+3，技能一次补满充能次数           |
| 工程站     | 解锁高级单位，生产单位攻防为当前攻防等级+1（最高5级） | 防御等级研发上限+1（最高4级） | 中等血量提升，攻防设置为当前步兵攻防                         |
| 军械库     | 解锁高级单位，生产单位攻防为当前攻防等级+1（最高5级） | 攻击等级研发上限+1（最高4级） | 中等血量提升，攻防设置为当前载具攻防                         |
| 幽灵军校   | 该建筑生产施法单位能量上限翻倍                        | 建筑技能消耗减半              | 高额血量提升，技能范围/施法范围提高50%                       |
| 聚变星体   | 50%造价提高，一次生产两个单位                         | 建筑技能充能速度加倍          | 高额血量提升，技能能耗减半、充能翻倍、作用频率翻倍、延长时间提高 |
| 灵能干扰器 |                                                       |                               | 击中单位（范围）眩晕                                         |
| 灵能控制器 |                                                       |                               | 击中单位（范围）产生混乱                                     |

